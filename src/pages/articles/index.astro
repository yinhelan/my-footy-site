---
import AppLayout from '../../layouts/AppLayout.astro';
const title = 'Articles · Footy Analytics';
const jsonLd = {"@context":"https://schema.org","@type":"CollectionPage","name":"Articles","inLanguage":"zh-CN","url":Astro.request.url};
const modules = import.meta.glob('./*.md', { eager: true });
type PostItem = { url: string; title: string; description?: string; date?: string; tags?: string[]; };
const posts: PostItem[] = Object.entries(modules).map(([p, mod]: any) => {
  const fm = mod.frontmatter || {};
  const url = p.replace('./','/articles/').replace(/\.md$/, '/');
  return { url, title: fm.title || url, description: fm.description, date: fm.date, tags: fm.tags || [] };
}).sort((a,b) => (b.date || '').localeCompare(a.date || ''));
---
<AppLayout title={title} description="工具相关的模型笔记与示例" jsonLd={jsonLd}>
  <style>
    .list{max-width:860px;margin:0 auto}
    .item{padding:14px 0;border-bottom:1px solid #eee}
    .item h3{margin:0 0 .25rem 0}
    .meta{color:#666;font-size:.95rem}
    .tag{display:inline-block;background:#0ea5e910;border:1px solid #0ea5e933;color:#0a7;padding:.1rem .4rem;border-radius:.5rem;margin-right:.3rem}
    a{text-decoration:none;color:inherit} a:hover h3{text-decoration:underline}
  </style>
  <h1>Articles</h1>
  <div class="list">
    {posts.length === 0 && <p>暂无文章。</p>}
    {posts.map(p => (
      <div class="item">
        <a href={p.url}><h3>{p.title}</h3></a>
        {p.description && <p>{p.description}</p>}
        <div class="meta">
          {p.date && <>发布：{new Date(p.date).toLocaleDateString('zh-CN')} · </>}
          {p.tags?.map(t => <span class="tag">{t}</span>)}
        </div>
      </div>
    ))}
  </div>
</AppLayout>
