---
import SEO from '/src/components/SEO.astro';
import analyticsAdapter from '../components/AnalyticsAdapter.ts';

export interface Props {
  title: string;
  description?: string;
  jsonLd?: Record<string, any> | null;
  active?: 'insights' | 'implied' | 'kelly' | 'home' | '';
}
const {
  title,
  description = 'Football tools: Poisson · Implied Odds · Kelly',
  jsonLd = null,
  active = ''
} = Astro.props;

const analyticsScript = analyticsAdapter();
---
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <SEO title={title} description={description} jsonLd={jsonLd} />
<style>
      :root{ --container: 880px; }
      *{ box-sizing: border-box }
      body{
        margin:0;
        font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        color:#111; background:#fff;
      }
      header{ position:sticky; top:0; background:#fff; border-bottom:1px solid #eee; z-index:10 }
      .wrap{ max-width:var(--container); margin:0 auto; padding:0 16px }
      .nav{ display:flex; align-items:center; gap:16px; height:56px }
      .nav a{ color:#333; text-decoration:none; padding:6px 8px; border-radius:8px }
      .nav a:hover{ background:#f5f5f5 }
      .nav .active{ background:#0ea5e910; color:#0a7; border:1px solid #0ea5e933 }
      main.wrap{ padding:24px 16px }
      footer{ border-top:1px solid #eee; margin-top:32px }
      footer .wrap{ padding:16px }
      small.muted{ color:#666 }
    </style>
  </head>
  <body>
    <header>
      <nav class="wrap nav">
        <img alt="logo" src="/og-default.svg" width="22" height="22" />
        <a href="/" class={active === 'home' ? 'active' : ''}>Home</a>
        <a href="/tools/match-insights/" class={active === 'insights' ? 'active' : ''}>Match Insights</a>
        <a href="/tools/implied-odds/" class={active === 'implied' ? 'active' : ''}>Implied Odds</a>
        <a href="/tools/kelly/" class={active === 'kelly' ? 'active' : ''}>Kelly</a>
        <span style="margin-left:auto"></span>
        <!-- 同意开关（可选调试）：在控制台可调用 window.__setAnalyticsConsent('granted'|'denied') -->
      </nav>
    </header>

    <main class="wrap">
      <slot />
    </main>

    <footer>
      <div class="wrap">
        <small class="muted">© Footy Analytics · 本工具仅用于学习演示，不构成投注建议。</small>
      </div>
    </footer>
    {analyticsScript && <script is:inline>{analyticsScript}</script>}
  </body>
</html>
